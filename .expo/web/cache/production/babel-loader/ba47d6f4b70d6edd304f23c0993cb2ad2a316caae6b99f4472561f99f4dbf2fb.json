{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{useEffect,useState}from'react';import decode from\"./decode\";export function useBlurhash(blurhash){var width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;var height=arguments.length>2&&arguments[2]!==undefined?arguments[2]:32;var punch=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;punch=punch||1;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];useEffect(function(){var isCanceled=false;if(!blurhash)return;var pixels=decode(blurhash,width,height,punch);var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;var context=canvas.getContext('2d');var imageData=context.createImageData(width,height);imageData.data.set(pixels);context.putImageData(imageData,0,0);canvas.toBlob(function(blob){if(!isCanceled){setUrl(function(oldUrl){if(oldUrl){URL.revokeObjectURL(oldUrl);}return blob?URL.createObjectURL(blob):oldUrl;});}});return function cleanupBlurhash(){isCanceled=true;setUrl(function(oldUrl){if(oldUrl){URL.revokeObjectURL(oldUrl);}return null;});};},[blurhash,height,width,punch]);return url;}","map":{"version":3,"names":["useEffect","useState","decode","useBlurhash","blurhash","width","arguments","length","undefined","height","punch","_useState","_useState2","_slicedToArray","url","setUrl","isCanceled","pixels","canvas","document","createElement","context","getContext","imageData","createImageData","data","set","putImageData","toBlob","blob","oldUrl","URL","revokeObjectURL","createObjectURL","cleanupBlurhash"],"sources":["/Users/mobileappteamdetrix/WorkSpace/PersonalWork/AppProjects/ReactNative/PersonalPortfolioSIte/profile/node_modules/expo-image/src/utils/blurhash/useBlurhash.tsx"],"sourcesContent":["// adapted from https://gist.github.com/ngbrown/d62eb518753378eb0a9bf02bb4723235\n// modified from https://gist.github.com/WorldMaker/a3cbe0059acd827edee568198376b95a\n// https://github.com/woltapp/react-blurhash/issues/3\n\nimport { useEffect, useState } from 'react';\n\nimport decode from './decode';\n\nexport function useBlurhash(\n  blurhash: string | undefined | null,\n  width: number = 32,\n  height: number = 32,\n  punch: number = 1\n) {\n  punch = punch || 1;\n\n  const [url, setUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    let isCanceled = false;\n\n    if (!blurhash) return;\n\n    const pixels = decode(blurhash, width, height, punch);\n\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext('2d');\n    const imageData = context!.createImageData(width, height);\n    imageData.data.set(pixels);\n    context!.putImageData(imageData, 0, 0);\n    canvas.toBlob((blob) => {\n      if (!isCanceled) {\n        setUrl((oldUrl) => {\n          if (oldUrl) {\n            URL.revokeObjectURL(oldUrl);\n          }\n          return blob ? URL.createObjectURL(blob) : oldUrl;\n        });\n      }\n    });\n\n    return function cleanupBlurhash() {\n      isCanceled = true;\n      setUrl((oldUrl) => {\n        if (oldUrl) {\n          URL.revokeObjectURL(oldUrl);\n        }\n        return null;\n      });\n    };\n  }, [blurhash, height, width, punch]);\n\n  return url;\n}\n"],"mappings":"iEAIA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE3C,MAAO,CAAAC,MAAM,gBAEb,MAAM,SAAU,CAAAC,WAAWA,CACzBC,QAAmC,CAGlB,IAFjB,CAAAC,KAAA,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAgB,EAAE,IAClB,CAAAG,MAAA,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAiB,EAAE,IACnB,CAAAI,KAAA,CAAAJ,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAgB,CAAC,CAEjBI,KAAK,CAAGA,KAAK,EAAI,CAAC,CAElB,IAAAC,SAAA,CAAsBV,QAAQ,CAAgB,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAElBZ,SAAS,CAAC,UAAK,CACb,GAAI,CAAAgB,UAAU,CAAG,KAAK,CAEtB,GAAI,CAACZ,QAAQ,CAAE,OAEf,GAAM,CAAAa,MAAM,CAAGf,MAAM,CAACE,QAAQ,CAAEC,KAAK,CAAEI,MAAM,CAAEC,KAAK,CAAC,CAErD,GAAM,CAAAQ,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACb,KAAK,CAAGA,KAAK,CACpBa,MAAM,CAACT,MAAM,CAAGA,MAAM,CACtB,GAAM,CAAAY,OAAO,CAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC,CACvC,GAAM,CAAAC,SAAS,CAAGF,OAAQ,CAACG,eAAe,CAACnB,KAAK,CAAEI,MAAM,CAAC,CACzDc,SAAS,CAACE,IAAI,CAACC,GAAG,CAACT,MAAM,CAAC,CAC1BI,OAAQ,CAACM,YAAY,CAACJ,SAAS,CAAE,CAAC,CAAE,CAAC,CAAC,CACtCL,MAAM,CAACU,MAAM,CAAC,SAACC,IAAI,CAAI,CACrB,GAAI,CAACb,UAAU,CAAE,CACfD,MAAM,CAAC,SAACe,MAAM,CAAI,CAChB,GAAIA,MAAM,CAAE,CACVC,GAAG,CAACC,eAAe,CAACF,MAAM,CAAC,C,CAE7B,MAAO,CAAAD,IAAI,CAAGE,GAAG,CAACE,eAAe,CAACJ,IAAI,CAAC,CAAGC,MAAM,CAClD,CAAC,CAAC,C,CAEN,CAAC,CAAC,CAEF,MAAO,SAAS,CAAAI,eAAeA,CAAA,EAC7BlB,UAAU,CAAG,IAAI,CACjBD,MAAM,CAAC,SAACe,MAAM,CAAI,CAChB,GAAIA,MAAM,CAAE,CACVC,GAAG,CAACC,eAAe,CAACF,MAAM,CAAC,C,CAE7B,MAAO,KAAI,CACb,CAAC,CAAC,CACJ,CAAC,CACH,CAAC,CAAE,CAAC1B,QAAQ,CAAEK,MAAM,CAAEJ,KAAK,CAAEK,KAAK,CAAC,CAAC,CAEpC,MAAO,CAAAI,GAAG,CACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}